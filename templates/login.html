{% extends "layout.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-4">
        <div class="card glass-card p-4 shadow">
            <h2 class="text-center mb-4">Login</h2>

            {% if is_in_app %}
            <div class="alert alert-warning mb-4">
                <div class="d-flex align-items-center mb-2">
                    <i class="bi bi-exclamation-triangle-fill me-2 fs-4"></i>
                    <strong>Detecting In-App Browser</strong>
                </div>
                <p class="small mb-2">Google Login may not work inside apps like LINE, Facebook, or Instagram.</p>

                <div class="d-grid gap-2">
                    <button class="btn btn-sm btn-warning" onclick="copyCurrentUrl()">
                        <i class="bi bi-clipboard"></i> Copy Website Link
                    </button>
                </div>

                {% if is_fb_ig %}
                <hr>
                <p class="small mb-0"><strong>Tip:</strong> Click the <strong>three dots (...)</strong> at the top right
                    and select <strong>"Open in Browser"</strong> (Chrome/Safari) to login.</p>
                {% endif %}
            </div>

            <script>
                function copyCurrentUrl() {
                    const url = window.location.href.split('?')[0];
                    navigator.clipboard.writeText(url).then(() => {
                        alert("Link copied! Please open Chrome or Safari and paste the link to login.");
                    });
                }
            </script>
            {% endif %}

            <div class="d-grid gap-2 mb-3">
                <a href="/login/google" class="btn btn-outline-danger {% if is_in_app %}disabled{% endif %}" {% if
                    is_in_app %}onclick="return false;" {% endif %}>
                    <img src="https://www.svgrepo.com/show/475656/google-color.svg" width="20" height="20" class="me-2"
                        alt="Google">
                    Login with Google
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}